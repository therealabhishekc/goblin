version: 1.0
runtime: python3
build:
  commands:
    build:
      - echo "Building the application..."
      - pip install --upgrade pip
      - pip install -r backend/requirements.txt
run:
  runtime-version: 3.12
  command: cd backend && gunicorn app.main:app -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000 --log-file -
  network:
    port: 8000
    env:
      PORT: 8000
  env:
    - name: DYNAMODB_TABLE_NAME
      value: whatsapp-dedup-prod
    - name: AWS_REGION
      value: us-east-1
    - name: DATABASE_URL
      value: postgresql://postgres:your_password@your-rds-endpoint:5432/whatsapp_business
    # Add your other environment variables here:
    # - name: VERIFY_TOKEN
    #   value: your_verify_token
    # - name: WHATSAPP_TOKEN
    #   value: your_whatsapp_token
    # - name: WHATSAPP_PHONE_NUMBER_ID
    #   value: your_phone_number_id
